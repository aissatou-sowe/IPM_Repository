<div class="modal fade" id="bare"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog cascading-modal" role="document">
      <!--Content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Prise en Compte des Cotisations</h4>
          <button mat-button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            <i class="material-icons">clear</i>
          </button>
        </div>
        <!--Modal cascading tabs-->
        <div class="modal-c-tabs">
          <!-- Tab panels -->
          <div class="tab-content">
              <!--Body-->
              <div class="modal-body mb-1">
                <form>
                    <div class="row">
                        <div class="col-md-5" style="margin-top: -35px;">
                            <!--*ngIf="agree" -->
                            <mat-form-field>
                              <!-- <label for="Categorie"><b>Categorie</b> </label> -->
                              <mat-select name="categorie"  id="categorie" placeholder="Selectionner cat" [(ngModel)]="categorie">
                                <mat-option  *ngFor="let prest of categories" [value]="prest.code_categorie" 
                                (click)="getnomCategorie(prest)">{{ prest.libelle }}
                                  
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                      <div class=" col-md-5" style="margin-top: -20px;">
                        <!-- <label for="Montant"><b>Montant</b> </label> -->
                        <input type="text" name="montant" class="form-control" id="montant" [(ngModel)]="montant">                      </div>
                      
                    </div>
                </form>
                
                
                
                
                <div class="text-center mt-2">
                  <button class="btn btn-info btn-round" data-dismiss="modal"  (click)="Enregistrer()"
                >Enregistrer<i class="fas fa-sign-in-alt ml-1"></i></button>
                </div>
              </div>
              <!--Footer-->
              <div class="modal-footer">
                
        <button mat-raised-button type="button" class="btn btn-outline-info waves-effect ml-auto"
         data-dismiss="modal">Close</button>
              </div>
          </div>
  
        </div>
      </div>
    </div>
  </div>
  <!--Modal cotisation Entité -->
  <div class="tab-pane" id="link1">
    <div class="container-fluid">
      <div class="row">
          <div class="col-md-12">
              <div class="card">
                  <div class="card-header card-header-icon card-header-rose">
          <h4 class="card-title">Prise en Compte des Cotisations par entité</h4>
          <button mat-button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            <i class="material-icons">clear</i>
          </button>
        </div>
       
      
          
          <div class="tab-content" >
              <!--Body-->

                <!-- <form #form="ngForm">
                    <div class="row">
                        <div class="col-md-5" style="margin-top: -35px;">
                           
                            <mat-form-field>
                             
                              <mat-select name="entite"  id="entite" placeholder="Selectionner l'entité" [(ngModel)]="entite">
                                <mat-option  *ngFor="let prest of listEntity" [value]="prest.idEntity" 
                                (click)="getnomEntity(prest);form.resetForm()">{{ prest.nom_entity }}
                                  
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                     
                </form> -->
                
          
              <div class="col-md-12" *ngIf="listCotisationEntity" >
                <div class="card" >
                    <div class="card-header card-header-icon card-header-rose">
                        <div class="card-icon">
                          <i class="material-icons">assignment</i>
                        </div>
                       
                      
                      
                        <h4 class="card-title">Liste prévisionnelle Des Cotisations de l'entité {{nomEntity}} </h4>
                        
                       
          
                    </div>
                   
                    <div [ngSwitch]="condition">
                    
                      <div *ngSwitchCase="1">Contenu de remplacement 1
                        <div class="card-body table-full-width">
                          <div class="material-datatable">
                              <table id="datatable1" class="table table-hover table-bordered text-black"
                                  cellspacing="0" width="100%" style="width:100%">
                            
                                  <thead style="background-color: whitesmoke;">
                            
                                      <tr>                                                                                                                                                                                                                        
                                          <th style="font-weight: 600;" class="text-center" cope="col"> Matricule</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Prenom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Nom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Catégorie</th>
                                          <!-- <th cope="col">Code Prestation</th> -->
                            
                                          <th style="font-weight: 600;" class="text-center" cope="col">Solde</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Montant à cotiser</th>

                                          <th style="font-weight: 600;" class="text-center" cope="col">Numero carnet</th>
                                          <!-- <th class="text-center" cope="col">Action</th>
                                          <th class="text-center" cope="col"></th> -->
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let employ of listCotisationEntity">
                                          <td class="text-center">{{employ.matricule}}</td>
                                          <td class="text-center">{{employ.prenom}}</td>
                                          <td class="text-center">{{employ.nom}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.libelle}}</td>
                                          <!-- <td>{{fac.ipm_prestation?.code_prestation}}</td>-->
                                          <td class="text-center">{{employ.solde | number:'1.0-0'}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.montant | number:'1.0-0'}}</td>

                                          <td class="text-center">{{employ.numero_carnet}}</td>
                                      </tr>
                                  </tbody>
                                 
                                  
                                  
                              </table>
                              <div class="modal-footer justify-content-center">
                                <button (click)="fileDownloadEntity()" mat-raised-button class="btn btn-info">
                                  <i class="material-icons">checked</i>Exporter Fichier</button>
                                </div>
                            </div>
                        </div>
                      </div>
                      
                      <div *ngSwitchCase="2">Contenu de remplacement 2
                        <div class="card-body table-full-width">
                          <div class="material-datatable">
                              <table id="datatable1" class="table table-hover table-bordered text-black"
                                  cellspacing="0" width="100%" style="width:100%">
                            
                                  <thead style="background-color: whitesmoke;">
                            
                                      <tr>                                                                                                                                                                                                                        
                                          <th style="font-weight: 600;" class="text-center" cope="col"> Matricule</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Prenom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Nom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Catégorie</th>
                                          <!-- <th cope="col">Code Prestation</th> -->
                            
                                          <th style="font-weight: 600;" class="text-center" cope="col">Solde</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Montant à cotiser</th>

                                          <th style="font-weight: 600;" class="text-center" cope="col">Numero carnet</th>
                                          <!-- <th class="text-center" cope="col">Action</th>
                                          <th class="text-center" cope="col"></th> -->
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let employ of listCotisationEntity">
                                          <td class="text-center">{{employ.matricule}}</td>
                                          <td class="text-center">{{employ.prenom}}</td>
                                          <td class="text-center">{{employ.nom}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.libelle}}</td>
                                          <!-- <td>{{fac.ipm_prestation?.code_prestation}}</td>-->
                                          <td class="text-center">{{employ.solde | number:'1.0-0'}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.montant | number:'1.0-0'}}</td>

                                          <td class="text-center">{{employ.numero_carnet}}</td>
                                      </tr>
                                  </tbody>
                                 
                                  
                                  
                              </table>
                              <div class="modal-footer justify-content-center">
                                <button (click)="fileDownloadEntity()" mat-raised-button class="btn btn-info">
                                  <i class="material-icons">checked</i>Exporter Fichier</button>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div *ngSwitchCase="3">Contenu de remplacement 3
                        <div class="card-body table-full-width">
                          <div class="material-datatable">
                              <table id="datatable1" class="table table-hover table-bordered text-black"
                                  cellspacing="0" width="100%" style="width:100%">
                            
                                  <thead style="background-color: whitesmoke;">
                            
                                      <tr>                                                                                                                                                                                                                        
                                          <th style="font-weight: 600;" class="text-center" cope="col"> Matricule</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Prenom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Nom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Catégorie</th>
                                          <!-- <th cope="col">Code Prestation</th> -->
                            
                                          <th style="font-weight: 600;" class="text-center" cope="col">Solde</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Montant à cotiser</th>

                                          <th style="font-weight: 600;" class="text-center" cope="col">Numero carnet</th>
                                          <!-- <th class="text-center" cope="col">Action</th>
                                          <th class="text-center" cope="col"></th> -->
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let employ of listCotisationEntity">
                                          <td class="text-center">{{employ.matricule}}</td>
                                          <td class="text-center">{{employ.prenom}}</td>
                                          <td class="text-center">{{employ.nom}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.libelle}}</td>
                                          <!-- <td>{{fac.ipm_prestation?.code_prestation}}</td>-->
                                          <td class="text-center">{{employ.solde | number:'1.0-0'}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.montant | number:'1.0-0'}}</td>

                                          <td class="text-center">{{employ.numero_carnet}}</td>
                                      </tr>
                                  </tbody>
                                 
                                  
                                  
                              </table>
                              <div class="modal-footer justify-content-center">
                                <button (click)="fileDownloadEntity()" mat-raised-button class="btn btn-info">
                                  <i class="material-icons">checked</i>Exporter Fichier</button>
                                </div>
                            </div>
                        </div>
                      </div>
                      <div *ngSwitchCase="4">Contenu de remplacement 4
                        <div class="card-body table-full-width">
                          <div class="material-datatable">
                              <table id="datatable1" class="table table-hover table-bordered text-black"
                                  cellspacing="0" width="100%" style="width:100%">
                            
                                  <thead style="background-color: whitesmoke;">
                            
                                      <tr>                                                                                                                                                                                                                        
                                          <th style="font-weight: 600;" class="text-center" cope="col"> Matricule</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Prenom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Nom</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Catégorie</th>
                                          <!-- <th cope="col">Code Prestation</th> -->
                            
                                          <th style="font-weight: 600;" class="text-center" cope="col">Solde</th>
                                          <th style="font-weight: 600;" class="text-center" cope="col">Montant à cotiser</th>

                                          <th style="font-weight: 600;" class="text-center" cope="col">Numero carnet</th>
                                          <!-- <th class="text-center" cope="col">Action</th>
                                          <th class="text-center" cope="col"></th> -->
                                      </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let employ of listCotisationEntity">
                                          <td class="text-center">{{employ.matricule}}</td>
                                          <td class="text-center">{{employ.prenom}}</td>
                                          <td class="text-center">{{employ.nom}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.libelle}}</td>
                                          <!-- <td>{{fac.ipm_prestation?.code_prestation}}</td>-->
                                          <td class="text-center">{{employ.solde | number:'1.0-0'}}</td>
                                          <td class="text-center">{{employ.ipm_categorie.montant | number:'1.0-0'}}</td>

                                          <td class="text-center">{{employ.numero_carnet}}</td>
                                      </tr>
                                  </tbody>
                                 
                                  
                                  
                              </table>
                              <div class="modal-footer justify-content-center">
                                <button (click)="fileDownloadEntity()" mat-raised-button class="btn btn-info">
                                  <i class="material-icons">checked</i>Exporter Fichier</button>
                                </div>
                            </div>
                        </div>
                      </div>
                    </div>

                        </div>
                        </div>
              <!--Footer-->
             
          </div>
  
      </div>
    </div>
  </div>
  </div>
  </div>
  <!--Fin-->
  <div class="main-content">
      <div class="container-fluid">
          <div class="row">
              <div class="col-md-12">
                  <div class="card">
                      <div class="card-header card-header-icon card-header-rose">
                          <div class="card-icon">
                            <i class="material-icons">assignment</i>
                          </div>
                          <!-- <button mat-raised-button type="button" class="btn btn-success">
                            <i class="material-icons" data-toggle="modal" data-target="#bareme"
                            >add_circle</i>
                        </button>   -->
                        <button mat-raised-button type="button" style="float:right;margin-top:1cm; 
                        font-size: 16px;" data-toggle="modal" data-target="#bare" class="btn btn-success">
                            <i class="material-icons" >add_circle</i> Modifer Cotisations
                        </button>
                        <!-- <button mat-raised-button type="button" style="float:right;margin-top:1cm; 
                        font-size: 16px;" data-toggle="modal" data-target="#entite" class="btn btn-success">
                            <i class="material-icons" >edit</i> Cotisations Par Entité
                        </button> -->
                     
                          <h4 class="card-title">Liste prévisionnelle Des Cotisations</h4>
                          <div class="col-md-5" style="margin-top: -35px;">
                           
                            <mat-form-field>
                             
                              <mat-select name="entite"  id="entite" placeholder="Selectionner l'entité" [(ngModel)]="entite">
                                <mat-option  *ngFor="let prest of listEntity" [value]="prest.idEntity" class="nav-link "
                                data-toggle="tab" href="#link1" role="tablist"
                                (click)="getnomEntity(prest);form.resetForm()">{{ prest.nom_entity }}
                                  
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                         
                      </div>
                          <div class="card-body table-full-width">
                            <div class="material-datatable">
                                <table id="datatable" class="table table-hover table-bordered text-black"
                                    cellspacing="0" width="100%" style="width:100%">
                              
                                    <thead style="background-color: whitesmoke;">
                              
                                        <tr>
                                            <th style="font-weight: 600;" class="text-center" cope="col"> Matricule</th>
                                            <th style="font-weight: 600;" class="text-center" cope="col">Prenom</th>
                                            <th style="font-weight: 600;" class="text-center" cope="col">Nom</th>
                                            <th style="font-weight: 600;" class="text-center" cope="col">Catégorie</th>
                                            <!-- <th cope="col">Code Prestation</th> -->
                              
                                            <th style="font-weight: 600;" class="text-center" cope="col">Solde</th>
                                            <th style="font-weight: 600;" class="text-center" cope="col">Montant à cotiser</th>

                                            <th style="font-weight: 600;" class="text-center" cope="col">Numero carnet</th>
                                            <!-- <th class="text-center" cope="col">Action</th>
                                            <th class="text-center" cope="col"></th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let employ of employe">
                                            <td class="text-center">{{employ.matricule}}</td>
                                            <td class="text-center">{{employ.prenom}}</td>
                                            <td class="text-center">{{employ.nom}}</td>
                                            <td class="text-center">{{employ.ipm_categorie.libelle}}</td>
                                            <!-- <td>{{fac.ipm_prestation?.code_prestation}}</td>
                              -->
                                            <td class="text-center">{{employ.solde | number:'1.0-0'}}</td>
                                            <td class="text-center">{{employ.ipm_categorie.montant | number:'1.0-0'}}</td>

                                            <td class="text-center">{{employ.numero_carnet}}</td>
                                        </tr>
                                    </tbody>
                                   
                                    
                                    
                                </table>
                                <div class="modal-footer justify-content-center">
                                  <button (click)="fileDownload()" mat-raised-button class="btn btn-info">
                                    <i class="material-icons">checked</i>Exporter Fichier</button>
                                  </div>
                              </div>
                          </div>
  
                          </div>
                          </div>
                      </div>
                  </div>
              </div>


              <!----------Modification des Barèmes------------>

              <div class="modal fade" id="modifbareme"  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog cascading-modal" role="document">
                  <!--Content-->
                  <div class="modal-content">
                    <div class="modal-header">
                      <h4 class="modal-title">Modification des Cotisations</h4>
                      <button mat-button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        <i class="material-icons">clear</i>
                      </button>
                    </div>
                    <!--Modal cascading tabs-->
                    <div class="modal-c-tabs">
                      <!-- Tab panels -->
                      <div class="tab-content">
                          <!--Body-->
                          <div class="modal-body mb-1">
                            <div class="col-md-6 form-group">     
                                    
                              <input type="text" id="min" name="min"
                                class="form-control" placeholder="Categorie">
                         
                            </div>
                            <div class="col-md-6 form-group">   
                           
                              <input type="text" id="max" 
                               name="max"  class="form-control"
                                placeholder="Maximum">
                      
                            </div>
                            <div class="col-md-6 form-group">     
                           
                              <input type="text" id="montant" 
                               name="montant"  class="form-control" placeholder="Montant">
                
                            </div>
                            
                            <div class="text-center mt-2">
                              <button class="btn btn-info btn-round" data-dismiss="modal"
                              >Modifer<i class="fas fa-sign-in-alt ml-1"></i></button>
                            </div>
                          </div>
                          <!--Footer-->
                          <div class="modal-footer">
                            
                            
                   
                          </div>
                      </div>
              
                    </div>
                  </div>
                </div>
              </div>
              <!--Modal: Login / Register Form-->
