{"version":3,"sources":["./src/app/cotisation/ajout-cotisation/ajout-cotisation.component.css","./src/app/cotisation/ajout-cotisation/ajout-cotisation.component.ts","./src/app/cotisation/ajout-cotisation/ajout-cotisation.component.html","./src/app/cotisation/liste-cotisation/liste-cotisation.component.css","./src/app/cotisation/cotisation.module.ts","./src/app/cotisation/liste-cotisation/liste-cotisation.component.ts","./src/app/cotisation/cotisation-routing.module.ts","./src/app/cotisation/liste-cotisation/liste-cotisation.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,6GAA8C,uLAAuL,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAzM;AACO;AACA;AACkB;AACf;AACI;AACd;AACiB;AAGM;AACrC;;IAkB3B,kCAAqB,MAAc,EAAS,WAA2B,EAAU,KAAqB,EAC5F,MAAqB,EAAU,SAAsB,EACrD,UAAsB,EACtB,WAA8B,EAAU,QAAkB;QAH/C,WAAM,GAAN,MAAM,CAAQ;QAAS,gBAAW,GAAX,WAAW,CAAgB;QAAU,UAAK,GAAL,KAAK,CAAgB;QAC5F,WAAM,GAAN,MAAM,CAAe;QAAU,cAAS,GAAT,SAAS,CAAa;QACrD,eAAU,GAAV,UAAU,CAAY;QACtB,gBAAW,GAAX,WAAW,CAAmB;QAAU,aAAQ,GAAR,QAAQ,CAAU;QAVpE,gBAAW,GAAmB,EAAE,CAAC;QAEjC,eAAU,GAAC,EAAE,CAAC;QACd,WAAM,GAAG,EAAE,CAAC;QACZ,qBAAgB,GAAkB,EAAC,WAAW,EAAC,IAAI,EAAC,OAAO,EAAC,IAAI,EAAC,WAAW,EAAC,IAAI,EAAC,cAAc,EAAC,IAAI,EAAC;QACtG,iBAAY,GAAC,IAAI,yEAAU,EAAE,CAAC;QAM1B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACrC,CAAC;IAEJ,2CAAQ,GAAR;QACE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;YACrC,wCAAwC;YACxC,MAAM,EAAE,CAAC,EAAE,EAAE,yDAAU,CAAC,QAAQ,CAAC;YACjC,OAAO,EAAC,CAAC,EAAE,CAAC;YACZ,SAAS,EAAC,CAAC,EAAE,CAAC;SAEf,CAAC,CAAC;IACL,CAAC;IAED,+CAAY,GAAZ,UAAa,KAAU;QACrB,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,IAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACnC,aAAa;YACb,2CAA2C;SAC5C;IACH,CAAC;IACD,6BAA6B;IAC7B,kDAAe,GAAf;QACE,IAAI,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,gBAAgB,GAAG,cAAM,YAAK,EAAL,CAAK,CAAC;QAC9D,IAAI,CAAC,MAAM,CAAC,mBAAmB,GAAG,QAAQ,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;IACrC,CAAC;IACD,sBAAsB;IACtB,+CAAY,GAAZ,UAAa,GAAQ;QAArB,iBA0BC;QAzBC,yBAAyB;QACzB,IAAM,MAAM,GAA+B,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACxD,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;QAC5E,IAAM,MAAM,GAAe,IAAI,UAAU,EAAE,CAAC;QAC5C,MAAM,CAAC,MAAM,GAAG,UAAC,CAAM;YACrB,mBAAmB;YACnB,IAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;YAC3B,KAAI,CAAC,EAAE,GAAG,0CAAS,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YAE9C,sBAAsB;YACtB,KAAI,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,aAAG;gBAC5B,KAAI,CAAC,EAAE,GAAG,2CAAU,CAAC,aAAa,CAAC,KAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACvD,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,EAAE,CAAC,CAAC;YAEvB,CAAC,CAAC,CAAC;YACH,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAI,CAAC,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACnD,KAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;aAGhB;YAED,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,EAAE,CAAC;QAE9B,CAAC,CAAC;QACF,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7C,CAAC;IACD,iDAAc,GAAd,UAAe,GAAQ;QACrB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEf,KAAoB,UAAG,EAAH,WAAG,EAAH,iBAAG,EAAH,IAAG,EAAE;YAApB,IAAI,OAAO;YACd,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC,OAAO,CAAC;YAC9B,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC;SAGrB;IAEH,CAAC;IAED,2CAAQ,GAAR;QAAA,iBAgDC;QA/CC,IAAI,CAAC,YAAY,CAAC,cAAc,GAAC,IAAI,CAAC,KAAK;QAC3C,IAAI,CAAC,YAAY,CAAC,IAAI,GAAE,IAAI,IAAI,EAAE;QAClC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;QAE9B,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,SAAS,CAC3D,UAAC,IAAY;YACX,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;YACjB,KAAI,CAAC,YAAY,CAAC,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC;oCAC1C,KAAK;gBACZ,KAAI,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC;gBAC5B,KAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,SAAS;gBAE/D,4CAA4C;gBAC5C,UAAC,IAAI;oBACH,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBAGpB,IAAI,KAAI,CAAC,OAAO,EAAE;wBAChB,KAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC;wBACnC,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,WAAW,CAAC;wBAC3B,KAAI,CAAC,gBAAgB,CAAC,OAAO,GAAC,KAAK,CAAC,OAAO;wBAC5C,kDAAkD;wBACjD,KAAI,CAAC,gBAAgB,CAAC,WAAW,GAAC,KAAI,CAAC,OAAO;wBAC9C,KAAI,CAAC,gBAAgB,CAAC,cAAc,GAAC,KAAI,CAAC,YAAY;wBAExD,KAAI,CAAC,MAAM,CAAC,IAAI,cAAM,KAAI,CAAC,gBAAgB,EAAG,CAAC;wBAE/C,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,EAAE,CAAC,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;wBACrD,IAAI,KAAI,CAAC,EAAE,CAAC,MAAM,IAAI,KAAI,CAAC,WAAW,CAAC,MAAM,EAAE;4BAC7C,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;4BACrC,KAAI,CAAC,WAAW,CAAC,mBAAmB,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC,SAAS,CAEvD,UAAC,IAAI;gCACH,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;4BACnB,CAAC,CACF,CAAC;yBACL;qBACF;gBAGH,CAAC,CAAC;;YAhCN,KAAkB,UAAO,EAAP,UAAI,CAAC,EAAE,EAAP,cAAO,EAAP,IAAO;gBAApB,IAAI,KAAK;wBAAL,KAAK;aAmCb;QACD,CAAC,CAAC;IAGJ,CAAC;;gBA/IsB,sDAAM;gBAKtB,gFAAc;gBALd,8DAAc;gBACd,wDAAa;gBAHb,0DAAW;gBAFX,+DAAU;gBAGV,kEAAW;gBAJX,wDAAQ;;IAiBJ,wBAAwB;QALpC,+DAAS,CAAC;YACT,QAAQ,EAAE,sBAAsB;YAChC,6FAAgD;;SAEjD,CAAC;yCAa6B,sDAAM,EAAsB,gFAAc,EAAiB,8DAAc;YACpF,wDAAa,EAAqB,0DAAW;YACzC,+DAAU;YACT,kEAAW,EAA0B,wDAAQ;OAfzD,wBAAwB,CAsIpC;IAAD,+BAAC;CAAA;AAtIoC;;;;;;;;;;;;;ACjBrC;AAAe,iNAAkJ,2TAA2T,wCAAwC,oCAAoC,aAAa,YAAY,uIAAuI,qtBAAqtB,E;;;;;;;;;;;;ACA75C;AAAe,6GAA8C,uLAAuL,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA3M;AACgB;AAEgC;AACA;AAC1C;AACM;AACa;AACnB;AACS;;;IAexB,CAAC;IAApB,gBAAgB;QAZ5B,8DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,qGAAwB,EAAE,qGAAwB,CAAC;YAClE,OAAO,EAAE;gBACP,4DAAY;gBACZ,4DAAY,CAAC,QAAQ,CAAC,iEAAM,CAAC;gBAC7B,0DAAW;gBACX,0DAAc;gBACd,qEAAgB;gBAChB,kEAAmB;aACpB;YACD,SAAS,EAAE,CAAC,wDAAQ,CAAC;SACtB,CAAC;OACW,gBAAgB,CAAI;IAAD,uBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBqB;;IAShD;IAAgB,CAAC;IAEjB,2CAAQ,GAAR;IACA,CAAC;;IALU,wBAAwB;QALpC,+DAAS,CAAC;YACT,QAAQ,EAAE,sBAAsB;YAChC,6FAAgD;;SAEjD,CAAC;;OACW,wBAAwB,CAOpC;IAAD,+BAAC;CAAA;AAPoC;;;;;;;;;;;;;ACLrC;AAAA;AAAA;AAAA;AAAyF;AACA;AAElF,IAAM,MAAM,GAAW;IAC5B;QACE,IAAI,EAAE,EAAE;QACR,QAAQ,EAAE,CAAE;gBACV,IAAI,EAAE,iBAAiB;gBACvB,SAAS,EAAC,qGAAwB;aACnC,CAAC;KACH;IACD;QACE,IAAI,EAAE,EAAE;QACR,QAAQ,EAAE,CAAE;gBACV,IAAI,EAAE,iBAAiB;gBACvB,SAAS,EAAE,qGAAwB;aACpC,CAAC;KACL;CACA,CAAC;AAEF,cAAc;AACd,8CAA8C;AAC9C,4BAA4B;AAC5B,KAAK;AACL,2CAA2C;;;;;;;;;;;;;AC1B3C;AAAe,iGAAkC,E","file":"cotisation-cotisation-module.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvdGlzYXRpb24vYWpvdXQtY290aXNhdGlvbi9ham91dC1jb3Rpc2F0aW9uLmNvbXBvbmVudC5jc3MifQ== */\";","import { DatePipe } from '@angular/common';\nimport { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { DateAdapter } from '@angular/material/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Cotisation } from 'src/app/Models/CotisatonGlobal';\nimport { Employe } from 'src/app/Models/Employe';\nimport { DetailCotisation } from 'src/app/Models/IPM_Cotisation';\nimport { EmployeService } from 'src/app/Services/employe.service';\nimport * as xlsx from 'xlsx';\n@Component({\n  selector: 'app-ajout-cotisation',\n  templateUrl: './ajout-cotisation.component.html',\n  styleUrls: ['./ajout-cotisation.component.css']\n})\nexport class AjoutCotisationComponent implements OnInit {\n\n  uploadForm: FormGroup;\n  wb: xlsx.WorkBook;\n  ws: any[];\n  listEmploye: Array<Employe> = [];\n  message: Employe;\n  cotisation=[];\n  panier = [];\n  detailCotisation:DetailCotisation={id_Det_Coti:null,montant:null,ipm_employe:null,ipm_cotisation:null}\n  cotisaGlobal=new Cotisation();\n  total: number;\n  constructor( private router: Router,private emp_service: EmployeService, private route: ActivatedRoute,\n    private toastr: ToastrService, private formbuild: FormBuilder,\n    private httpClient: HttpClient,\n    private dateAdapter: DateAdapter<Date>, private datepipe: DatePipe,) {\n      this.dateAdapter.setLocale('en-GB');\n     }\n\n  ngOnInit(): void {\n    this.uploadForm = this.formbuild.group({\n      // evenement: ['', Validators.required],\n      myFile: ['', Validators.required],\n      montant:[''],\n      matricule:[''],\n\n    });\n  }\n\n  onFileSelect(event: any) {\n    if (event.target.files.length > 0) {\n      const file = event.target.files[0];\n      // @ts-ignore\n      //this.uploadForm.get('myFile').setValue();\n    }\n  }\n  ///////////////////////RELOAD\n  reloadComponent() {\n    let currentUrl = this.router.url;\n    this.router.routeReuseStrategy.shouldReuseRoute = () => false;\n    this.router.onSameUrlNavigation = 'reload';\n    this.router.navigate([currentUrl]);\n  }\n  ///////////////////// \n  onFileChange(evt: any) {\n    /* wire up file reader */\n    const target: DataTransfer = <DataTransfer>(evt.target);\n    if (target.files.length !== 1) throw new Error('Cannot use multiple files');\n    const reader: FileReader = new FileReader();\n    reader.onload = (e: any) => {\n      /* read workbook */\n      let bstr = e.target.result;\n      this.wb = xlsx.read(bstr, { type: 'binary' });\n\n      /* grab first sheet */\n      this.wb.SheetNames.forEach(ele => {\n        this.ws = xlsx.utils.sheet_to_json(this.wb.Sheets[ele])\n        console.log(this.ws);\n       \n      });\n      for (let index = 0; index < this.ws.length; index++) {\n        this.ws[index];\n              \n       \n      }\n     \n      this.calculemontant(this.ws)\n      \n    };\n    reader.readAsBinaryString(target.files[0]);\n  }\n  calculemontant(fac: any) {\n    this.total = 0;\n    \n    for (let element of fac) {\n      this.total += element.montant;\n      console.log(element)\n      \n\n    }\n\n  }\n\n  onSubmit(){\n    this.cotisaGlobal.montant_totals=this.total\n    this.cotisaGlobal.date= new Date()\n    console.log(this.cotisaGlobal)\n\n    this.emp_service.AjoutCotisation(this.cotisaGlobal).subscribe(\n      (data: string) => {\n        console.log(data)\n        this.cotisaGlobal.idCotisation = parseInt(data)\n    for (let elemt of this.ws) {\n      this.total += elemt.montant;\n      this.emp_service.getEmployeByMatricule(elemt.matricule).subscribe(\n\n        //() => console.log(\"Processing Complete.\"),\n        (data) => {\n          this.message = data;\n          \n\n          if (this.message) {\n            this.listEmploye.push(this.message)\n            console.log(this.listEmploye)\n              this.detailCotisation.montant=elemt.montant\n             // this.detailCotisation.matricule=elemt.matricule\n              this.detailCotisation.ipm_employe=this.message\n              this.detailCotisation.ipm_cotisation=this.cotisaGlobal\n          \n            this.panier.push({ ...this.detailCotisation });\n             \n            console.log(this.ws.length, this.listEmploye.length);\n            if (this.ws.length == this.listEmploye.length) {\n              console.log(this.listEmploye.length);\n              this.emp_service.AjoutDetaCotisation(this.panier).subscribe\n                (\n                  (data) => {\n                    console.log(data)\n                  }\n                );\n            }\n          }\n         \n          \n        })\n      \n\n    }\n    })\n  \n\n  }\n\n\n}\n","export default \"\\n<div class=\\\"card-body\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-6\\\">\\n            <div class=\\\"card \\\" style=\\\"margin-left:8cm;\\\">\\n                <div class=\\\"card-header card-header-icon\\\">\\n                    <div class=\\\"card-icon\\\" style=\\\"background-color:rgba(17, 17, 227, 0.88)\\\">\\n                        <i class=\\\"material-icons\\\">list</i>\\n                    </div>\\n                    <h3 style=\\\"background-color:whitesmoke; \\n                    font-weight: 400; color: \\n                    black; pading: 5px; width: 50%;\\\" class=\\\"card-title\\\">Cotisations</h3>\\n                </div>\\n                <div class=\\\"card-body\\\" style=\\\"padding-left: 3.5cm;\\\">\\n\\n                    <form [formGroup]=\\\"uploadForm\\\">\\n    \\n         \\n                        <!-- <input type=\\\"file\\\" (change)=\\\"onFileChange($event)\\\" multiple=\\\"false\\\" class=\\\"btn btn-outline-success\\\" /> -->\\n                  <input type=\\\"file\\\" (change)=\\\"onFileChange($event)\\\" multiple=\\\"true\\\"  formControlName=\\\"myFile\\\"/>\\n              \\n                  <div class=\\\"modal-footer justify-content-center\\\">\\n                  <button  class=\\\"btn btn-success\\\" (click)=\\\"onSubmit()\\\">\\n                    <i class=\\\"material-icons\\\">checked</i>Ajout Cotisation</button>\\n                  </div>\\n                </form>\\n\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvdGlzYXRpb24vbGlzdGUtY290aXNhdGlvbi9saXN0ZS1jb3Rpc2F0aW9uLmNvbXBvbmVudC5jc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\n\nimport { AjoutCotisationComponent } from './ajout-cotisation/ajout-cotisation.component';\nimport { ListeCotisationComponent } from './liste-cotisation/liste-cotisation.component';\nimport { RouterModule } from '@angular/router';\nimport { routes } from './cotisation-routing.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MaterialModule } from '../app.module';\nimport { HttpClientModule } from '@angular/common/http';\n\n\n@NgModule({\n  declarations: [AjoutCotisationComponent, ListeCotisationComponent],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(routes),\n    FormsModule,\n    MaterialModule,\n    HttpClientModule,\n    ReactiveFormsModule\n  ],\n  providers: [DatePipe],\n})\nexport class CotisationModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-liste-cotisation',\n  templateUrl: './liste-cotisation.component.html',\n  styleUrls: ['./liste-cotisation.component.css']\n})\nexport class ListeCotisationComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { AjoutCotisationComponent } from './ajout-cotisation/ajout-cotisation.component';\nimport { ListeCotisationComponent } from './liste-cotisation/liste-cotisation.component';\n\nexport const routes: Routes = [\n  {\n    path: '',\n    children: [ {\n      path: 'AjoutCotisation',\n      component:AjoutCotisationComponent\n    }]\n  },\n  {\n    path: '',\n    children: [ {\n      path: 'ListeCotisation',\n      component: ListeCotisationComponent\n    }]\n},\n];\n\n// @NgModule({\n//   imports: [RouterModule.forChild(routes)],\n//   exports: [RouterModule]\n// })\n// export class CotisationRoutingModule { }\n","export default \"<p>liste-cotisation works!</p>\\n\";"],"sourceRoot":"webpack:///"}